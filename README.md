# Отслает по email сообщения из очереди RabbitMQ

Настройка (что читать и куда посылать) производится через конфиг-файл. При запуске 'mailmq' необходимо указать параметром имя этого файла. Для примера в проект включен конфиг-файл 'mailmq.cfg.example'.

### Описание 'mailmq.cfg.example':

```
{
  // true - отправки по email не происходит, сообщение из очереди читается и выводится в лог
  // false - нормальный рабочий режим, сообщения отправляются по email
  "silent_mode": false,
  
  // имя сервера с RabbitMQ, в примере случай, когда mailmq и RabbitMQ запущены на одной машине
  "rabbit_mq_host": "amqp://",
  
  // имя очереди, должно совпадать с источником сообщений
  "rabbit_mq_queue_name": "MailsQueue",
  
  // далее настройки почтового севера
  "mail_host" : "smtp.mail.ru",
  "mail_port" : "25",
  "mail_user_name": "mail@mail.ru",
  "mail_password": "12345"
}
```

### Описание формата сообщений

Сообщения должны представлять собой JSON следующего формата:

```
{
  "to":["mail1@mail.ru","mail2@mail.ru"],
  "subject":"Message subject text",
  "message":"Message body text"
}
```

### Особенности
* очередь инициализируется как устойчивая
* сообщения обрабатываются последовательно: читается одно сообщение, обрабатывается, помечается как выполненное, читается следующее
* возможен запуск нескольких экземпляров mailmq одновременно
* в случае остановки сервера RabbiMq приложение mailmq так же прекратит работу
* если при отправке email произойдет ошибка, то сообщение всеравно считается обработанным
